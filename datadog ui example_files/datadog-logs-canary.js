(()=>{const e={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},t=console,n={};Object.keys(e).forEach((e=>{n[e]=t[e]}));const o="Datadog Browser SDK:",r={debug:n.debug.bind(t,o),log:n.log.bind(t,o),info:n.info.bind(t,o),warn:n.warn.bind(t,o),error:n.error.bind(t,o)},s="https://docs.datadoghq.com",i=s+"/real_user_monitoring/browser/troubleshooting",a="More details:";function c(e,t){return(...n)=>{try{return e(...n)}catch(e){r.error(t,e)}}}let u,l=!1;function d(e){l=e}function f(e){return function(){return p(e,this,arguments)}}function p(e,t,n){try{return e.apply(t,n)}catch(e){g(e)}}function g(e){if(m(e),u)try{u(e)}catch(e){m(e)}}function m(...e){l&&r.error("[MONITOR]",...e)}function y(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}function h(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function b(e,t,n=function(){if("undefined"!=typeof WeakSet){const e=new WeakSet;return{hasAlreadyBeenSeen(t){const n=e.has(t);return n||e.add(t),n}}}const e=[];return{hasAlreadyBeenSeen(t){const n=e.indexOf(t)>=0;return n||e.push(t),n}}}()){if(void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const e=t.flags||(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":"");return RegExp(t.source,e)}if(n.hasAlreadyBeenSeen(t))return;if(Array.isArray(t)){const o=Array.isArray(e)?e:[];for(let e=0;e<t.length;++e)o[e]=b(o[e],t[e],n);return o}const o="object"===h(e)?e:{};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=b(o[e],t[e],n));return o}function v(e){return b(void 0,e)}function w(...e){let t;for(const n of e)null!=n&&(t=b(t,n));return t}const S=/[^\u0000-\u007F]/;function k(e){return S.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length}function x(e,t){const n=y();let o;return n.Zone&&"function"==typeof n.Zone.__symbol__&&(o=e[n.Zone.__symbol__(t)]),o||(o=e[t]),o}function C(e,t){return x(y(),"setTimeout")(f(e),t)}function _(e){x(y(),"clearTimeout")(e)}function E(e,t){return x(y(),"setInterval")(f(e),t)}function T(e){x(y(),"clearInterval")(e)}function R(){}function O(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);const o=L(Object.prototype),r=L(Array.prototype),s=L(Object.getPrototypeOf(e)),i=L(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{o(),r(),s(),i()}}function L(e){const t=e,n=t.toJSON;return n?(delete t.toJSON,()=>{t.toJSON=n}):R}function A(e,t=225280){const n=L(Object.prototype),o=L(Array.prototype),r=[],s=new WeakMap,i=$(e,"$",void 0,r,s),a=JSON.stringify(i);let c=a?a.length:0;if(!(c>t)){for(;r.length>0&&c<t;){const n=r.shift();let o=0;if(Array.isArray(n.source))for(let i=0;i<n.source.length;i++){const a=$(n.source[i],n.path,i,r,s);if(c+=void 0!==a?JSON.stringify(a).length:4,c+=o,o=1,c>t){P(t,"truncated",e);break}n.target[i]=a}else for(const i in n.source)if(Object.prototype.hasOwnProperty.call(n.source,i)){const a=$(n.source[i],n.path,i,r,s);if(void 0!==a&&(c+=JSON.stringify(a).length+o+i.length+3,o=1),c>t){P(t,"truncated",e);break}n.target[i]=a}}return n(),o(),i}P(t,"discarded",e)}function $(e,t,n,o,r){const s=function(e){const t=e;if(t&&"function"==typeof t.toJSON)try{return t.toJSON()}catch(e){}return e}(e);if(!s||"object"!=typeof s)return"bigint"==typeof(i=s)?"[BigInt] "+i.toString():"function"==typeof i?"[Function] "+(i.name||"unknown"):"symbol"==typeof i?"[Symbol] "+(i.description||i.toString()):i;var i;const a=I(s);if("[Object]"!==a&&"[Array]"!==a&&"[Error]"!==a)return a;const c=e;if(r.has(c))return`[Reference seen at ${r.get(c)}]`;const u=void 0!==n?`${t}.${n}`:t,l=Array.isArray(s)?[]:{};return r.set(c,u),o.push({source:s,target:l,path:u}),l}function I(e){try{if(e instanceof Event)return{type:(t=e).type,isTrusted:t.isTrusted,currentTarget:t.currentTarget?I(t.currentTarget):null,target:t.target?I(t.target):null};if(e instanceof RegExp)return"[RegExp] "+e.toString();const n=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(n&&n[1])return`[${n[1]}]`}catch(e){}var t;return"[Unserializable]"}function P(e,t,n){r.warn(`The data provided has been ${t} as it is over the limit of ${e} characters:`,n)}class D{constructor(e){this.onFirstSubscribe=e,this.observers=[]}subscribe(e){return this.observers.push(e),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:()=>{this.observers=this.observers.filter((t=>e!==t)),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(e){this.observers.forEach((t=>t(e)))}}function M(...e){return new D((t=>{const n=e.map((e=>e.subscribe((e=>t.notify(e)))));return()=>n.forEach((e=>e.unsubscribe()))}))}function U(e,t,n){const o={...e};for(const[e,{required:s,type:i}]of Object.entries(t))"string"!==i||q(o[e])||(o[e]=o[e]+""),s&&q(o[e])&&r.warn(`The property ${e} of ${n} is required; context will not be sent to the intake.`);return o}function q(e){return null==e||""===e}function B(e="",{propertiesConfig:t={}}={}){let n={};const o=new D,s={getContext:()=>v(n),setContext(i){!function(e){const t="object"===h(e);return t||r.error("Unsupported context:",e),t}(i)?s.clearContext():n=A(U(i,t,e)),o.notify()},setContextProperty(r,s){n=A(U({...n,[r]:s},t,e)),o.notify()},removeContextProperty(r){delete n[r],U(n,t,e),o.notify()},clearContext(){n={},o.notify()},changeObservable:o};return s}const j={GRANTED:"granted",NOT_GRANTED:"not-granted"};function N(e,t,n,o,r){return F(e,t,[n],o,r)}function F(e,t,n,o,{once:r,capture:s,passive:i}={}){const a=f((t=>{(t.isTrusted||t.__ddIsTrusted||e.allowUntrustedEvents)&&(r&&d(),o(t))})),c=i?{capture:s,passive:i}:s,u=window.EventTarget&&t instanceof EventTarget?window.EventTarget.prototype:t,l=x(u,"addEventListener");function d(){const e=x(u,"removeEventListener");n.forEach((n=>e.call(t,n,a,c)))}return n.forEach((e=>l.call(t,e,a,c))),{stop:d}}function H(e,t){return Object.keys(e).some((n=>e[n]===t))}function G(e){return 0===Object.keys(e).length}const z=[];function J(e,t,n,o){const r=function(e,t){return`_dd_c_${e}_${t}`}(n,o);z.push(N(e,window,"storage",(({key:e})=>{r===e&&t.setContext(i())}))),t.changeObservable.subscribe((function(){localStorage.setItem(r,JSON.stringify(t.getContext()))}));const s=w(i(),t.getContext());function i(){const e=localStorage.getItem(r);return e?JSON.parse(e):{}}G(s)||t.setContext(s)}const W="?";function K(e){const t=[];let n=oe(e,"stack");const o=e+"";return n&&n.startsWith(o)&&(n=n.slice(o.length)),n&&n.split("\n").forEach((e=>{const n=function(e){const t=X.exec(e);if(!t)return;const n=t[2]&&0===t[2].indexOf("native"),o=t[2]&&0===t[2].indexOf("eval"),r=Y.exec(t[2]);return o&&r&&(t[2]=r[1],t[3]=r[2],t[4]=r[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||W,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}(e)||function(e){const t=Q.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:W,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){const t=ee.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||W,line:+t[3],url:t[2]}}(e)||function(e){const t=te.exec(e);if(!t)return;const n=t[3]&&t[3].indexOf(" > eval")>-1,o=ne.exec(t[3]);return n&&o&&(t[3]=o[1],t[4]=o[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||W,line:t[4]?+t[4]:void 0,url:t[3]}}(e);n&&(!n.func&&n.line&&(n.func=W),t.push(n))})),{message:oe(e,"message"),name:oe(e,"name"),stack:t}}const V="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Z="(?::(\\d+))",X=RegExp(`^\\s*at (.*?) ?\\(${V}${Z}?${Z}?\\)?\\s*$`,"i"),Y=RegExp(`\\((\\S*)${Z}${Z}\\)`),Q=RegExp(`^\\s*at ?${V}${Z}?${Z}??\\s*$`,"i"),ee=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,te=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle|\[wasm code\])(?::(\d+))?(?::(\d+))?\s*$/i,ne=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function oe(e,t){if("object"!=typeof e||!e||!(t in e))return;const n=e[t];return"string"==typeof n?n:void 0}const re=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function se(e){const t=Error(e);let n;return t.name="HandlingStack",p((()=>{const e=K(t);e.stack=e.stack.slice(2),n=ie(e)})),n}function ie(e){let t=ae(e);return e.stack.forEach((e=>{const n="?"===e.func?"<anonymous>":e.func,o=e.args&&e.args.length>0?`(${e.args.join(", ")})`:"",r=e.line?":"+e.line:"",s=e.line&&e.column?":"+e.column:"";t+=`\n  at ${n}${o} @ ${e.url}${r}${s}`})),t}function ae(e){return`${e.name||"Error"}: ${e.message}`}const ce="No stack, consider using an instance of Error";function ue({stackTrace:e,originalError:t,handlingStack:n,componentStack:o,startClocks:r,nonErrorPrefix:s,useFallbackStack:i=!0,source:a,handling:c}){const u=pe(t);return!e&&u&&(e=K(t)),{startClocks:r,source:a,handling:c,handlingStack:n,componentStack:o,originalError:t,type:e?e.name:void 0,message:le(e,u,s,t),stack:e?ie(e):i?ce:void 0,causes:u?ge(t,a):void 0,fingerprint:de(t),context:fe(t)}}function le(e,t,n,o){return(null==e?void 0:e.message)&&(null==e?void 0:e.name)?e.message:t?"Empty message":`${n} ${O(A(o))}`}function de(e){return pe(e)&&"dd_fingerprint"in e?e.dd_fingerprint+"":void 0}function fe(e){if(null!==e&&"object"==typeof e&&"dd_context"in e)return e.dd_context}function pe(e){return e instanceof Error||"[object Error]"===Object.prototype.toString.call(e)}function ge(e,t){let n=e;const o=[];for(;pe(null==n?void 0:n.cause)&&o.length<10;){const e=K(n.cause);o.push({message:n.cause.message,source:t,type:null==e?void 0:e.name,stack:e&&ie(e)}),n=n.cause}return o.length?o:void 0}var me;!function(e){e.PROFILING="profiling",e.TRACK_INTAKE_REQUESTS="track_intake_requests",e.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql"}(me||(me={}));const ye=new Set,he="datadoghq.com",be=["ddsource","ddtags"];function ve(){return(new Date).getTime()}function we(){return ve()}function Se(){return performance.now()}function ke(){return{relative:Se(),timeStamp:we()}}let xe;function Ce(){return void 0===xe&&(xe=performance.timing.navigationStart),xe}function _e(e,t){const n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}function Ee(e){return 0!==e&&100*Math.random()<=e}function Te(){var e;const t=window.navigator;return{status:t.onLine?"connected":"not_connected",interfaces:t.connection&&t.connection.type?[t.connection.type]:void 0,effective_type:null===(e=t.connection)||void 0===e?void 0:e.effectiveType}}function Re(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function Oe(){const e=[];return{add(t){e.push(t)>500&&e.splice(0,1)},remove(t){Re(e,t)},drain(t){e.forEach((e=>e(t))),e.length=0}}}function Le(){const e=y().DatadogEventBridge;if(e)return{getCapabilities(){var t;return JSON.parse((null===(t=e.getCapabilities)||void 0===t?void 0:t.call(e))||"[]")},getPrivacyLevel(){var t;return null===(t=e.getPrivacyLevel)||void 0===t?void 0:t.call(e)},getAllowedWebViewHosts(){return JSON.parse(e.getAllowedWebViewHosts())},send(t,n,o){const r=o?{id:o}:void 0;e.send(JSON.stringify({eventType:t,event:n,view:r}))}}}function Ae(e){var t;void 0===e&&(e=null===(t=y().location)||void 0===t?void 0:t.hostname);const n=Le();return!!n&&n.getAllowedWebViewHosts().some((t=>e===t||e.endsWith("."+t)))}function $e(e){return Object.values(e)}const Ie={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function Pe({encoder:e,request:t,flushController:n,messageBytesLimit:o}){let s={};const c=n.flushObservable.subscribe((n=>function(n){const o=$e(s).join("\n");s={};const r=(a=n.reason,$e(Ie).includes(a)),i=r?t.sendOnExit:t.send;var a;if(r&&e.isAsync){const t=e.finishSync();t.outputBytesCount&&i(De(t));const n=[t.pendingData,o].filter(Boolean).join("\n");n&&i({data:n,bytesCount:k(n)})}else o&&e.write(e.isEmpty?o:"\n"+o),e.finish((e=>{i(De(e))}))}(n)));function u(t,c){const u=O(t),l=e.estimateEncodedBytesCount(u);l>=o?r.warn(`Discarded a message whose size was bigger than the maximum allowed size ${o}KB. ${a} ${i}/#technical-limitations`):(function(e){return void 0!==e&&void 0!==s[e]}(c)&&function(t){const o=s[t];delete s[t];const r=e.estimateEncodedBytesCount(o);n.notifyAfterRemoveMessage(r)}(c),function(t,o,r){n.notifyBeforeAddMessage(o),void 0!==r?(s[r]=t,n.notifyAfterAddMessage()):e.write(e.isEmpty?t:"\n"+t,(e=>{n.notifyAfterAddMessage(e-o)}))}(u,l,c))}return{flushController:n,add:u,upsert:u,stop:c.unsubscribe}}function De(e){let t;return t="string"==typeof e.output?e.output:new Blob([e.output],{type:"text/plain"}),{data:t,bytesCount:e.outputBytesCount,encoding:e.encoding}}function Me(e){return e>=500}const Ue="agent",qe="console",Be="logger",je="source",Ne="report";function Fe(e,t,n,o,r){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?Ge(e,t,n,{onSuccess:()=>ze(0,t,n,o,r),onFailure(){t.queuedPayloads.enqueue(e),He(t,n,o,r)}}):t.queuedPayloads.enqueue(e)}function He(e,t,n,o){2===e.transportStatus&&C((()=>{Ge(e.queuedPayloads.first(),e,t,{onSuccess(){e.queuedPayloads.dequeue(),e.currentBackoffTime=1e3,ze(1,e,t,n,o)},onFailure(){e.currentBackoffTime=Math.min(6e4,2*e.currentBackoffTime),He(e,t,n,o)}})}),e.currentBackoffTime)}function Ge(e,t,n,{onSuccess:o,onFailure:r}){t.bandwidthMonitor.add(e),n(e,(n=>{t.bandwidthMonitor.remove(e),function(e){return"opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||Me(e.status))}(n)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},r()):(t.transportStatus=0,o())}))}function ze(e,t,n,o,r){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(r({message:`Reached max ${o} events size queued for upload: 3MiB`,source:Ue,startClocks:ke()}),t.queueFullReported=!0);const s=t.queuedPayloads;for(t.queuedPayloads=Je();s.size()>0;)Fe(s.dequeue(),t,n,o,r)}function Je(){const e=[];return{bytesCount:0,enqueue(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first(){return e[0]},dequeue(){const t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size(){return e.length},isFull(){return this.bytesCount>=3145728}}}function We(e,t,n){const o={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:Je(),queueFullReported:!1},r=(n,o)=>function(e,t,n,o){if(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&n.bytesCount<t){const t=e.build("fetch-keepalive",n);fetch(t,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(f((e=>null==o?void 0:o({status:e.status,type:e.type})))).catch(f((()=>Ve(e,n,o))))}else Ve(e,n,o)}(e,t,n,o);return{send(t){Fe(t,o,r,e.trackType,n)},sendOnExit(n){!function(e,t,n){if(navigator.sendBeacon&&n.bytesCount<t)try{const t=e.build("beacon",n);if(navigator.sendBeacon(t,n.data))return}catch(e){!function(e){Ke||(Ke=!0,g(e))}(e)}Ve(e,n)}(e,t,n)}}}let Ke=!1;function Ve(e,t,n){const o=e.build("fetch",t);fetch(o,{method:"POST",body:t.data,mode:"cors"}).then(f((e=>null==n?void 0:n({status:e.status,type:e.type})))).catch(f((()=>null==n?void 0:n({status:0}))))}function Ze({messagesLimit:e,bytesLimit:t,durationLimit:n,pageMayExitObservable:o,sessionExpireObservable:r}){const s=o.subscribe((e=>d(e.reason))),i=r.subscribe((()=>d("session_expire"))),a=new D((()=>()=>{s.unsubscribe(),i.unsubscribe()}));let c,u=0,l=0;function d(e){if(0===l)return;const t=l,n=u;l=0,u=0,f(),a.notify({reason:e,messagesCount:t,bytesCount:n})}function f(){_(c),c=void 0}return{flushObservable:a,get messagesCount(){return l},notifyBeforeAddMessage(e){u+e>=t&&d("bytes_limit"),l+=1,u+=e,void 0===c&&(c=C((()=>{d("duration_limit")}),n))},notifyAfterAddMessage(n=0){u+=n,l>=e?d("messages_limit"):u>=t&&d("bytes_limit")},notifyAfterRemoveMessage(e){u-=e,l-=1,0===l&&f()}}}function Xe(e,t,n,o,r,s,i=Pe){const a=u(e,t),c=n&&u(e,n);function u(e,{endpoint:t,encoder:n}){return i({encoder:n,request:We(t,e.batchBytesLimit,o),flushController:Ze({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageMayExitObservable:r,sessionExpireObservable:s}),messageBytesLimit:e.messageBytesLimit})}return{flushObservable:a.flushController.flushObservable,add(e,t=!0){a.add(e),c&&t&&c.add(n.transformMessage?n.transformMessage(e):e)},upsert(e,t){a.upsert(e,t),c&&c.upsert(n.transformMessage?n.transformMessage(e):e,t)},stop(){a.stop(),c&&c.stop()}}}const Ye="log",Qe="configuration",et="usage",tt=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],nt=["ddog-gov.com"];let ot=Oe(),rt=e=>{ot.add((()=>rt(e)))};function st(t,n){m(e.debug,t,n),rt({type:Ye,message:t,status:"debug",...n})}function it(e,t){rt({type:Ye,status:"error",...ct(e),...t})}function at(e){rt({type:et,usage:e})}function ct(e){if(pe(e)){const t=K(e);return{error:{kind:t.name,stack:ie(ut(t))},message:t.message}}return{error:{stack:ce},message:"Uncaught "+O(e)}}function ut(e){return e.stack=e.stack.filter((e=>!e.url||tt.some((t=>e.url.startsWith(t))))),e}function lt(e,t,n,o){return f(((...r)=>(o&&at({feature:o}),e()[t][n](...r))))}function dt(e,t,n){e.changeObservable.subscribe((()=>{const o=e.getContext();n.add((e=>e[t].setContext(o)))}))}const ft="globalContext",pt="accountContext",gt="getContext",mt="setContext",yt="setContextProperty",ht="removeContextProperty",bt="clearContext";function vt(e,t){t.silentMultipleInit||r.error(e+" is already initialized.")}function wt(e,t,n){const o=n.getHandler(),r=Array.isArray(o)?o:[o];return kt[e]>=kt[n.getLevel()]&&r.includes(t)}const St={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},kt={[St.ok]:0,[St.debug]:1,[St.info]:2,[St.notice]:4,[St.warn]:5,[St.error]:6,[St.critical]:7,[St.alert]:8,[St.emerg]:9};function xt(e,{includeMessage:t=!1}={}){return{stack:e.stack,kind:e.type,message:t?e.message:void 0,causes:e.causes,fingerprint:e.fingerprint,handling:e.handling}}const Ct="http",_t=Object.keys(St);class Et{constructor(e,t,n=Ct,o=St.debug,r={}){this.handleLogStrategy=e,this.handlerType=n,this.level=o,this.contextManager=B("logger"),this.contextManager.setContext(r),t&&this.contextManager.setContextProperty("logger",{name:t})}logImplementation(e,t,n=St.info,o,r){const s=A(t);let i;if(null!=o){const e=ue({originalError:o,nonErrorPrefix:"Provided",source:Be,handling:"handled",startClocks:ke()});i=w({error:xt(e,{includeMessage:!0})},e.context,s)}else i=s;this.handleLogStrategy({message:A(e),context:i,status:n},this,r)}log(e,t,n=St.info,o){let r;wt(n,Ct,this)&&(r=se("log")),this.logImplementation(e,t,n,o,r)}setContext(e){this.contextManager.setContext(e)}getContext(){return this.contextManager.getContext()}setContextProperty(e,t){this.contextManager.setContextProperty(e,t)}removeContextProperty(e){this.contextManager.removeContextProperty(e)}clearContext(){this.contextManager.clearContext()}setHandler(e){this.handlerType=e}getHandler(){return this.handlerType}setLevel(e){this.level=e}getLevel(){return this.level}}function Tt(e){return function(t,n,o){let r;wt(e,Ct,this)&&(r=se("log")),this.logImplementation(t,n,e,o,r)}}function Rt(){return B("global context")}(function(e,t,n,o){var r,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);s>3&&i&&Object.defineProperty(t,n,i)})([function(e,t,n){const o=n.value;n.value=function(...e){return(u?f(o):o).apply(this,e)}}],Et.prototype,"logImplementation",null),Et.prototype.ok=Tt(St.ok),Et.prototype.debug=Tt(St.debug),Et.prototype.info=Tt(St.info),Et.prototype.notice=Tt(St.notice),Et.prototype.warn=Tt(St.warn),Et.prototype.error=Tt(St.error),Et.prototype.critical=Tt(St.critical),Et.prototype.alert=Tt(St.alert),Et.prototype.emerg=Tt(St.emerg);const Ot="DISCARDED",Lt="SKIPPED";function At(){return B("account",{propertiesConfig:{id:{type:"string",required:!0},name:{type:"string"}}})}function $t(e,t,n,{computeHandlingStack:o}={}){let r=e[t];if("function"!=typeof r){if(!(t in e)||!t.startsWith("on"))return{stop:R};r=R}let s=!1;const i=function(){if(s)return r.apply(this,arguments);const e=Array.from(arguments);let t;p(n,null,[{target:this,parameters:e,onPostCall(e){t=e},handlingStack:o?se("instrumented method"):void 0}]);const i=r.apply(this,e);return t&&p(t,null,[i]),i};return e[t]=i,{stop(){s=!0,e[t]===i&&(e[t]=r)}}}function It(e){return function(e,t){const n=function(){if(void 0===Dt)try{const e=new Pt("http://test/path");Dt="http://test/path"===e.href}catch(e){Dt=!1}return Dt?Pt:void 0}();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw Error(`Failed to construct URL: ${n+""} ${O({url:e,base:t})}`)}if(void 0===t&&!/:/.test(e))throw Error(`Invalid URL: '${e}'`);let o=document;const r=o.createElement("a");if(void 0!==t){o=document.implementation.createHTMLDocument("");const e=o.createElement("base");e.href=t,o.head.appendChild(e),o.body.appendChild(r)}return r.href=e,r}(e,location.href).href}const Pt=URL;let Dt,Mt;function Ut(){return Mt||(Mt=new D((e=>{if(!window.fetch)return;const{stop:t}=$t(window,"fetch",(t=>function({parameters:e,onPostCall:t,handlingStack:n},o){const[r,s]=e;let i=s&&s.method;void 0===i&&r instanceof Request&&(i=r.method);const a=void 0!==i?(i+"").toUpperCase():"GET",c=r instanceof Request?r.url:It(r+""),u={state:"start",init:s,input:r,method:a,startClocks:ke(),url:c,handlingStack:n};o.notify(u),e[0]=u.input,e[1]=u.init,t((e=>function(e,t,n){const o=n;function r(t){o.state="resolve",Object.assign(o,t),e.notify(o)}t.then(f((e=>{r({response:e,responseType:e.type,status:e.status,isAborted:!1})})),f((e=>{var t,n;r({status:0,isAborted:(null===(n=null===(t=o.init)||void 0===t?void 0:t.signal)||void 0===n?void 0:n.aborted)||e instanceof DOMException&&e.code===DOMException.ABORT_ERR,error:e})})))}(o,e,u)))}(t,e)),{computeHandlingStack:!0});return t}))),Mt}function qt(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,qt)}const Bt=/([\w-]+)\s*=\s*([^;]+)/g;function jt(e,t,n=""){const o=e.charCodeAt(t-1),r=o>=55296&&o<=56319?t+1:t;return e.length<=r?e:`${e.slice(0,r)}${n}`}let Nt,Ft,Ht;function Gt(e,t,n=0,o){const r=new Date;r.setTime(r.getTime()+n);const s="expires="+r.toUTCString(),i=o&&o.crossSite?"none":"strict",a=o&&o.domain?";domain="+o.domain:"",c=o&&o.secure?";secure":"",u=o&&o.partitioned?";partitioned":"";document.cookie=`${e}=${t};${s};path=/;samesite=${i}${a}${c}${u}`}function zt(e){return function(e,t){for(Bt.lastIndex=0;;){const n=Bt.exec(e);if(!n)break;if(n[1]===t)return n[2]}}(document.cookie,e)}function Jt(e){return Ft||(Ft=function(e){const t=new Map;for(Bt.lastIndex=0;;){const n=Bt.exec(e);if(!n)break;t.set(n[1],n[2])}return t}(document.cookie)),Ft.get(e)}function Wt(e,t){Gt(e,"",0,t)}const Kt="_dd_s",Vt=144e5,Zt=9e5,Xt="cookie",Yt="local-storage",Qt=/^([a-zA-Z]+)=([a-z0-9-]+)$/;function en(e,t){const n={isExpired:"1"};return t.trackAnonymousUser&&((null==e?void 0:e.anonymousId)?n.anonymousId=null==e?void 0:e.anonymousId:n.anonymousId=qt()),n}function tn(e){return G(e)}function nn(e){return!tn(e)}function on(e){return void 0!==e.isExpired||!((void 0===(t=e).created||ve()-Number(t.created)<Vt)&&(void 0===t.expire||ve()<Number(t.expire)));var t}function rn(e){e.expire=ve()+Zt+""}function sn(e){return(t=e,Object.entries(t)).map((([e,t])=>"anonymousId"===e?"aid="+t:`${e}=${t}`)).join("&");var t}function an(e){const t={};return function(e){return!!e&&(-1!==e.indexOf("&")||Qt.test(e))}(e)&&e.split("&").forEach((e=>{const n=Qt.exec(e);if(null!==n){const[,e,o]=n;"aid"===e?t.anonymousId=o:t[e]=o}})),t}function cn(e){const t=function(e){const t={};return t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===Ht){const e="dd_site_test_"+qt(),t="test",n=window.location.hostname.split(".");let o=n.pop();for(;n.length&&!zt(e);)o=`${n.pop()}.${o}`,Gt(e,t,1e3,{domain:o});Wt(e,{domain:o}),Ht=o}return Ht}()),t}(e);return function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{const t="dd_cookie_test_"+qt(),n="test";Gt(t,n,6e4,e);const o=zt(t)===n;return Wt(t,e),o}catch(e){return r.error(e),!1}}(t)?{type:Xt,cookieOptions:t}:void 0}function un(){return an(zt(Kt))}function ln(){try{const e=qt(),t="_dd_test_"+e;localStorage.setItem(t,e);const n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:Yt}:void 0}catch(e){return}}function dn(e){localStorage.setItem(Kt,sn(e))}function fn(){return an(localStorage.getItem(Kt))}const pn=[];let gn;function mn(e,t,n=0){var o;const{isLockEnabled:r,persistSession:s,expireSession:i}=t,a=e=>s({...e,lock:u}),c=()=>{const e=t.retrieveSession(),n=e.lock;return e.lock&&delete e.lock,{session:e,lock:n}};if(gn||(gn=e),e!==gn)return void pn.push(e);if(r&&n>=100)return void hn(t);let u,l=c();if(r){if(l.lock)return void yn(e,t,n);if(u=qt(),a(l.session),l=c(),l.lock!==u)return void yn(e,t,n)}let d=e.process(l.session);if(r&&(l=c(),l.lock!==u))yn(e,t,n);else{if(d&&(on(d)?i(d):(rn(d),r?a(d):s(d))),r&&(!d||!on(d))){if(l=c(),l.lock!==u)return void yn(e,t,n);s(l.session),d=l.session}null===(o=e.after)||void 0===o||o.call(e,d||l.session),hn(t)}}function yn(e,t,n){C((()=>{mn(e,t,n+1)}),10)}function hn(e){gn=void 0;const t=pn.shift();t&&mn(t,e)}function bn(e){switch(e.sessionPersistence){case Xt:return cn(e);case Yt:return ln();case void 0:{let t=cn(e);return!t&&e.allowFallbackToLocalStorage&&(t=ln()),t}default:r.error(`Invalid session persistence '${e.sessionPersistence+""}'`)}}const vn=["chrome-extension://","moz-extension://"];function wn(e){return vn.some((t=>e.includes(t)))}function Sn(e,t,n){const o=function(e,t){const n="/api/v2/"+t,o=e.proxy;if("string"==typeof o){const e=It(o);return t=>`${e}?ddforward=${encodeURIComponent(`${n}?${t}`)}`}if("function"==typeof o)return e=>o({path:n,parameters:e});const r=function(e,t){const{site:n=he,internalAnalyticsSubdomain:o}=t;if("logs"===e&&t.usePciIntake&&n===he)return"pci.browser-intake-datadoghq.com";if(o&&n===he)return`${o}.${he}`;if("dd0g-gov.com"===n)return"http-intake.logs."+n;const r=n.split("."),s=r.pop();return`browser-intake-${r.join("-")}.${s}`}(t,e);return e=>`https://${r}${n}?${e}`}(e,t);return{build(r,s){const i=function({clientToken:e,internalAnalyticsSubdomain:t},n,o,r,{retry:s,encoding:i}){const a=["sdk_version:6.11.0-4233472ec583d48f65d867a48a5810253af37d82","api:"+r].concat(o);s&&a.push("retry_count:"+s.count,"retry_after:"+s.lastFailureStatus);const c=["ddsource=browser","ddtags="+encodeURIComponent(a.join(",")),"dd-api-key="+e,"dd-evp-origin-version="+encodeURIComponent("6.11.0-4233472ec583d48f65d867a48a5810253af37d82"),"dd-evp-origin=browser","dd-request-id="+qt()];return i&&c.push("dd-evp-encoding="+i),"rum"===n&&c.push("batch_time="+we()),t&&c.reverse(),c.join("&")}(e,t,n,r,s);return o(i)},tags:n,urlPrefix:o(""),trackType:t}}function kn(e,t){const n=200-e.length-1;return(t.length>n||function(e){return!!function(){try{return RegExp("[\\p{Ll}]","u"),!0}catch(e){return!1}}()&&RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(e)}(t))&&r.warn(`${e} value doesn't meet tag requirements and will be sanitized. ${a} ${s}/getting_started/tagging/#defining-tags`),`${e}:${t.replace(/,/g,"_")}`}function xn(e){const t=e.site||he,n=function(e){const{env:t,service:n,version:o,datacenter:r}=e,s=[];return t&&s.push(kn("env",t)),n&&s.push(kn("service",n)),o&&s.push(kn("version",o)),r&&s.push(kn("datacenter",r)),s}(e),o=function(e,t){return{logsEndpointBuilder:Sn(e,"logs",t),rumEndpointBuilder:Sn(e,"rum",t),profilingEndpointBuilder:Sn(e,"profile",t),sessionReplayEndpointBuilder:Sn(e,"replay",t)}}(e,n),r=function(e,t){if(!e.replica)return;const n={...e,site:he,clientToken:e.replica.clientToken},o={logsEndpointBuilder:Sn(n,"logs",t),rumEndpointBuilder:Sn(n,"rum",t)};return{applicationId:e.replica.applicationId,...o}}(e,n);return{replica:r,site:t,...o}}function Cn(e,t){return null==e||"string"==typeof e||(r.error(t+" must be defined as a string"),!1)}function _n(e,t){return!!(void 0===e||(n=e,function(e){return"number"==typeof e}(n)&&n>=0&&n<=100))||(r.error(t+" Sample Rate should be a number between 0 and 100"),!1);var n}const En={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Tn(e){return{startClocks:ke(),source:Ne,handling:"unhandled",...e}}function Rn(e,t,n,o,r){return n?ie({name:e,message:t,stack:[{func:"?",url:n,line:null!=o?o:void 0,column:null!=r?r:void 0}]}):void 0}function On(e,t,n){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every((e=>t.includes(e)))?"all"===e?t:function(e){const t=new Set;return e.forEach((e=>t.add(e))),Array.from(t)}(e):void r.error(`${n} should be "all" or an array with allowed values "${t.join('", "')}"`)}function Ln(){let e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write(n,o){const r=k(n);t+=r,e+=n,o&&o(r)},finish(e){e(this.finishSync())},finishSync(){const n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount(e){return e.length}}}function An(){return!(!window._DATADOG_SYNTHETICS_INJECTS_RUM&&!Jt("datadog-synthetics-injects-rum"))}function $n(){const e=window._DATADOG_SYNTHETICS_PUBLIC_ID||Jt("datadog-synthetics-public-id");return"string"==typeof e?e:void 0}function In(){const e=window._DATADOG_SYNTHETICS_RESULT_ID||Jt("datadog-synthetics-result-id");return"string"==typeof e?e:void 0}const Pn=1/0;let Dn=null;const Mn=new Set,Un=Vt;let qn=[];function Bn(e,t,n,o){const r=new D,s=new D,i=function(e,t,n,o){const r=new D,s=new D,i=new D,a=e.type===Xt?function(e,t){const n={isLockEnabled:0===(null!=Nt?Nt:Nt=function(e=window){var t;const n=e.navigator.userAgent;return e.chrome||/HeadlessChrome/.test(n)?0:0===(null===(t=e.navigator.vendor)||void 0===t?void 0:t.indexOf("Apple"))||/safari/i.test(n)&&!/chrome|android/i.test(n)?1:2}()),persistSession:(o=t,e=>{Gt(Kt,sn(e),Zt,o)}),retrieveSession:un,expireSession:n=>function(e,t,n){const o=en(t,n);Gt(Kt,sn(o),n.trackAnonymousUser?31536e6:Vt,e)}(t,n,e)};var o;return function(e){if(!Jt(Kt)){const t=Jt("_dd"),n=Jt("_dd_r"),o=Jt("_dd_l"),r={};t&&(r.id=t),o&&/^[01]$/.test(o)&&(r.logs=o),n&&/^[012]$/.test(n)&&(r.rum=n),nn(r)&&(rn(r),e.persistSession(r))}}(n),n}(t,e.cookieOptions):function(e){return{isLockEnabled:!1,persistSession:dn,retrieveSession:fn,expireSession:t=>function(e,t){dn(en(e,t))}(t,e)}}(t),{expireSession:c}=a,u=E((function(){mn({process(e){return on(e)?en(e,t):void 0},after:p},a)}),1e3);let l;g();const{throttled:d,cancel:f}=function(e){let t,n,o=!1;return{throttled(...r){o?t=r:(e(...r),o=!0,n=C((()=>{t&&e(...t),o=!1,t=void 0}),1e3))},cancel(){_(n),o=!1,t=void 0}}}((()=>{mn({process(e){if(tn(e))return;const t=p(e);return function(e){if(tn(e))return!1;const t=o(e[n]);e[n]=t,delete e.isExpired,"0"===t||e.id||(e.id=qt(),e.created=ve()+"")}(t),t},after(e){nn(e)&&!m()&&function(e){l=e,r.notify()}(e),l=e}},a)}));function p(e){return on(e)&&(e=en(e,t)),m()&&(function(e){return l.id!==e.id||l[n]!==e[n]}(e)?(l=en(l,t),s.notify()):(i.notify({previousState:l,newState:e}),l=e)),e}function g(){mn({process(e){if(tn(e))return en(e,t)},after(e){l=e}},a)}function m(){return void 0!==l[n]}return{expandOrRenewSession:d,expandSession(){mn({process(e){return m()?p(e):void 0}},a)},getSession(){return l},renewObservable:r,expireObservable:s,sessionStateUpdateObservable:i,restartSession:g,expire(){f(),c(l),p(en(l,t))},stop(){T(u)},updateSessionState(e){mn({process(t){return{...t,...e}},after:p},a)}}}(e.sessionStoreStrategyType,e,t,n);qn.push((()=>i.stop()));const a=function({expireDelay:e,maxEntries:t}){let n=[];Dn||(Dn=E((()=>{Mn.forEach((e=>e()))}),6e4));const o=()=>{const t=Se()-e;for(;n.length>0&&n[n.length-1].endTime<t;)n.pop()};return Mn.add(o),{add(e,o){const r={value:e,startTime:o,endTime:Pn,remove(){Re(n,r)},close(e){r.endTime=e}};return t&&n.length>=t&&n.pop(),n.unshift(r),r},find(e=1/0,t={returnInactive:!1}){for(const o of n)if(o.startTime<=e){if(t.returnInactive||e<=o.endTime)return o.value;break}},closeActive(e){const t=n[0];t&&t.endTime===Pn&&t.close(e)},findAll(e=1/0,t=0){const o=e+t;return n.filter((t=>t.startTime<=o&&e<=t.endTime)).map((e=>e.value))},reset(){n=[]},stop(){Mn.delete(o),0===Mn.size&&Dn&&(T(Dn),Dn=null)}}}({expireDelay:Un});function c(){return{id:i.getSession().id,trackingType:i.getSession()[t],isReplayForced:!!i.getSession().forcedReplay,anonymousId:i.getSession().anonymousId}}return qn.push((()=>a.stop())),i.renewObservable.subscribe((()=>{a.add(c(),Se()),r.notify()})),i.expireObservable.subscribe((()=>{s.notify(),a.closeActive(Se())})),i.expandOrRenewSession(),a.add(c(),[0,Ce()][0]),o.observable.subscribe((()=>{o.isGranted()?i.expandOrRenewSession():i.expire()})),function(e){const{stop:t}=F(e,window,["click","touchstart","keydown","scroll"],(()=>{o.isGranted()&&i.expandOrRenewSession()}),{capture:!0,passive:!0});qn.push(t)}(e),function(e){const t=()=>{"visible"===document.visibilityState&&i.expandSession()},{stop:n}=N(e,document,"visibilitychange",t);qn.push(n);const o=E(t,6e4);qn.push((()=>{T(o)}))}(e),function(e){const{stop:t}=N(e,window,"resume",(()=>i.restartSession()),{capture:!0});qn.push(t)}(e),{findSession:(e,t)=>a.find(e,t),renewObservable:r,expireObservable:s,sessionStateUpdateObservable:i.sessionStateUpdateObservable,expire:i.expire,updateSessionState:i.updateSessionState}}function jn(e,t){return"0"===(n=t)||"1"===n?t:Ee(e.sessionSampleRate)?"1":"0";var n}let Nn={};const Fn={[e.log]:St.info,[e.debug]:St.debug,[e.info]:St.info,[e.warn]:St.warn,[e.error]:St.error};let Hn;const Gn=new WeakMap;function zn({target:e,parameters:[t,n]}){Gn.set(e,{state:"open",method:(t+"").toUpperCase(),url:It(n+"")})}function Jn({target:e}){const t=Gn.get(e);t&&(t.isAborted=!0)}function Wn(e,t){return e.length>t.requestErrorResponseLengthLimit?e.substring(0,t.requestErrorResponseLengthLimit)+"...":e}function Kn(e){return"xhr"===e?"XHR":"Fetch"}const Vn=class{constructor(){this.callbacks={}}notify(e,t){const n=this.callbacks[e];n&&n.forEach((e=>e(t)))}subscribe(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:()=>{this.callbacks[e]=this.callbacks[e].filter((e=>t!==e))}}}},Zn={[St.ok]:e.debug,[St.debug]:e.debug,[St.info]:e.info,[St.notice]:e.info,[St.warn]:e.warn,[St.error]:e.error,[St.critical]:e.error,[St.alert]:e.error,[St.emerg]:e.error},Xn=function(){const o=B("user",{propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}}),i=function(e){const t=new D;return{tryToInit(t){e||(e=t)},update(n){e=n,t.notify()},isGranted:()=>e===j.GRANTED,observable:t}}();function l(){return function(e){return{view:{referrer:document.referrer,url:window.location.href},user:e.getContext()}}(o)}let g=function(t,n,o){const i=Oe(),u=Rt();dt(u,ft,i);const l=At();let d,f;dt(l,pt,i);const p=n.observable.subscribe(g);function g(){if(!f||!d||!n.isGranted())return;p.unsubscribe();const e=o(d,f);i.drain(e)}return{init(t){if(!t)return void r.error("Missing configuration");if(o=t.enableExperimentalFeatures,Array.isArray(o)&&o.filter((e=>H(me,e))).forEach((e=>{ye.add(e)})),Ae()&&(t=function(e){return{...e,clientToken:"empty"}}(t)),d=t,function(e){rt({type:Qe,configuration:e})}(function(e){const t={session_sample_rate:(n=e).sessionSampleRate,telemetry_sample_rate:n.telemetrySampleRate,telemetry_configuration_sample_rate:n.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:n.telemetryUsageSampleRate,use_before_send:!!n.beforeSend,use_partitioned_cross_site_session_cookie:n.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:n.useSecureSessionCookie,use_proxy:!!n.proxy,silent_multiple_init:n.silentMultipleInit,track_session_across_subdomains:n.trackSessionAcrossSubdomains,track_anonymous_user:n.trackAnonymousUser,session_persistence:n.sessionPersistence,allow_fallback_to_local_storage:!!n.allowFallbackToLocalStorage,store_contexts_across_pages:!!n.storeContextsAcrossPages,allow_untrusted_events:!!n.allowUntrustedEvents,tracking_consent:n.trackingConsent,use_allowed_tracking_origins:Array.isArray(n.allowedTrackingOrigins)};var n;return{forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake,...t}}(t)),f)return void vt("DD_LOGS",t);var o;const i=function(t){!0===t.usePciIntake&&t.site&&"datadoghq.com"!==t.site&&r.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");const n=function(e){var t,n,o,i,u,l;if(e&&e.clientToken)if(void 0===e.allowedTrackingOrigins||Array.isArray(e.allowedTrackingOrigins)){if((!(d=e.site)||"string"!=typeof d||/(datadog|ddog|datad0g|dd0g)/.test(d)||(r.error(`Site should be a valid Datadog site. ${a} ${s}/getting_started/site/.`),0))&&_n(e.sessionSampleRate,"Session")&&_n(e.telemetrySampleRate,"Telemetry")&&_n(e.telemetryConfigurationSampleRate,"Telemetry Configuration")&&_n(e.telemetryUsageSampleRate,"Telemetry Usage")&&Cn(e.version,"Version")&&Cn(e.env,"Env")&&Cn(e.service,"Service")&&function(e,t=("undefined"!=typeof location?location.origin:""),n){const o=e.allowedTrackingOrigins;if(!o)return function(e,t=Error().stack){return!wn(e)&&wn(t||"")}(t,n)&&r.warn("Running the Browser SDK in a Web extension content script is discouraged and will be forbidden in a future major release unless the `allowedTrackingOrigins` option is provided."),!0;const s=function(e,t,n=!1){return e.some((e=>{try{if("function"==typeof e)return e(t);if(e instanceof RegExp)return e.test(t);if("string"==typeof e)return n?t.startsWith(e):e===t}catch(e){r.error(e)}return!1}))}(o,t);return s||r.error("SDK initialized on a non-allowed domain."),s}(e)){var d;if(void 0===e.trackingConsent||H(j,e.trackingConsent))return{beforeSend:e.beforeSend&&c(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:bn(e),sessionSampleRate:null!==(t=e.sessionSampleRate)&&void 0!==t?t:100,telemetrySampleRate:null!==(n=e.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(o=e.telemetryConfigurationSampleRate)&&void 0!==o?o:5,telemetryUsageSampleRate:null!==(i=e.telemetryUsageSampleRate)&&void 0!==i?i:5,service:e.service||void 0,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,trackingConsent:null!==(u=e.trackingConsent)&&void 0!==u?u:j.GRANTED,trackAnonymousUser:null===(l=e.trackAnonymousUser)||void 0===l||l,storeContextsAcrossPages:!!e.storeContextsAcrossPages,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144,...xn(e)};r.error('Tracking Consent should be either "granted" or "not-granted"')}}else r.error("Allowed Tracking Origins must be an array");else r.error("Client Token is not configured, we will not send any data.")}(t),o=On(t.forwardConsoleLogs,$e(e),"Forward Console Logs"),i=On(t.forwardReports,$e(En),"Forward Reports");if(n&&o&&i)return t.forwardErrorsToLogs&&!o.includes(e.error)&&o.push(e.error),{forwardErrorsToLogs:!1!==t.forwardErrorsToLogs,forwardConsoleLogs:o,forwardReports:i,requestErrorResponseLengthLimit:32768,...n}}(t);i&&(f=i,Ut().subscribe(R),n.tryToInit(i.trackingConsent),g())},get initConfiguration(){return d},globalContext:u,accountContext:l,getInternalContext:R,handleLog(e,n,o,r=t(),s=we()){i.add((t=>t.handleLog(e,n,o,r,s)))}}}(l,i,((r,s)=>{r.storeContextsAcrossPages&&J(s,o,"logs",1);const a=function(o,r,s){const i=new Vn,a=function(){const e={};return{register:(t,n)=>(e[t]||(e[t]=[]),e[t].push(n),{unregister(){e[t]=e[t].filter((e=>e!==n))}}),triggerHook(t,n){const o=e[t]||[],r=[];for(const e of o){const t=e(n);if(t===Ot)return Ot;t!==Lt&&r.push(t)}return w(...r)}}}(),c=[];i.subscribe(1,(e=>_e("logs",e)));const l=function(e){return t=>{e.notify(0,{rawLogsEvent:{message:t.message,date:t.startClocks.timeStamp,origin:Ue,status:St.error}}),st("Error reported to customer",{"error.message":t.message})}}(i),d=function(e){return new D((t=>{const{stop:n}=F(e,window,["visibilitychange","freeze"],(e=>{"visibilitychange"===e.type&&"hidden"===document.visibilityState?t.notify({reason:Ie.HIDDEN}):"freeze"===e.type&&t.notify({reason:Ie.FROZEN})}),{capture:!0}),o=N(e,window,"beforeunload",(()=>{t.notify({reason:Ie.UNLOADING})})).stop;return()=>{n(),o()}}))}(o),g=function(e,t,n,o,r){const s=new D,{stop:i}=function(e,t,n,o,r){const s=[];if(Ae()){const e=Le(),t=r.subscribe((t=>e.send("internal_telemetry",t)));s.push((()=>t.unsubscribe()))}else{const i=Xe(e,{endpoint:e.rumEndpointBuilder,encoder:o(4)},e.replica&&{endpoint:e.replica.rumEndpointBuilder,encoder:o(5)},t,n,new D);s.push((()=>i.stop()));const a=r.subscribe((t=>i.add(t,function(e){return"datad0g.com"===e.site}(e))));s.push((()=>a.unsubscribe()))}return{stop(){return s.forEach((e=>e()))}}}(t,n,o,r,s),{enabled:a,setContextProvider:c}=function(e,t,n){const o=new Set,r=new Map,s=!nt.includes(t.site)&&Ee(t.telemetrySampleRate),i={[Ye]:s,[Qe]:s&&Ee(t.telemetryConfigurationSampleRate),[et]:s&&Ee(t.telemetryUsageSampleRate)},a={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self};return rt=s=>{const c=O(s);if(i[s.type]&&o.size<t.maxTelemetryEventsPerPage&&!o.has(c)){const t=function(e,t,n){const o={type:"telemetry",date:we(),service:e,version:"6.11.0-4233472ec583d48f65d867a48a5810253af37d82",source:"browser",_dd:{format_version:2},telemetry:w(t,{runtime_env:n,connectivity:Te(),sdk_setup:"cdn"}),experimental_features:Array.from(ye)};for(const[e,t]of r)o[e]=t();return o}(e,s,a);n.notify(t),_e("telemetry",t),o.add(c)}},ot.drain(),u=it,{setContextProvider(e,t){return r.set(e,t)},enabled:s}}("browser-logs-sdk",t,s);return{setContextProvider:c,stop:i,enabled:a}}(0,o,l,d,Ln);c.push(g.stop);const m=!o.sessionStoreStrategyType||Ae()||An()?function(e){const t="1"===jn(e)?{}:void 0;return{findTrackedSession(){return t},expireObservable:new D}}(o):function(e,t){const n=Bn(e,"logs",(t=>jn(e,t)),t);return{findTrackedSession(e,t={returnInactive:!1}){const o=n.findSession(e,t);return o&&"1"===o.trackingType?{id:o.id,anonymousId:o.anonymousId}:void 0},expireObservable:n.expireObservable}}(o,s);g.setContextProvider("session.id",(()=>{var e;return null===(e=m.findTrackedSession())||void 0===e?void 0:e.id}));const y=function(e,t){const n=At();return t.storeContextsAcrossPages&&J(t,n,"logs",4),e.register(0,(()=>{const e=n.getContext();return G(e)||!e.id?Lt:{account:e}})),n}(a,o),h=function(e,t){const n=Rt();return t.storeContextsAcrossPages&&J(t,n,"logs",2),e.register(0,(()=>n.getContext())),n}(a,o),{stop:b,getRUMInternalContext:v}=function(e){const t=window;let n=!1;function o(e){const o=An(),r=function(e,t){if(t&&t.getInternalContext)return t.getInternalContext(e)}(e,o?t.DD_RUM_SYNTHETICS:t.DD_RUM);if(r)return r;o&&!n&&(n=!0,st("Logs sent before RUM is injected by the synthetics worker",{testId:$n(),resultId:In()}))}return e.register(0,(({startTime:e})=>o(e)||Lt)),{getRUMInternalContext:o,stop(){n=!1}}}(a);g.setContextProvider("application.id",(()=>{var e;return null===(e=v())||void 0===e?void 0:e.application_id})),g.setContextProvider("view.id",(()=>{var e,t;return null===(t=null===(e=v())||void 0===e?void 0:e.view)||void 0===t?void 0:t.id})),g.setContextProvider("action.id",(()=>{var e,t;return null===(t=null===(e=v())||void 0===e?void 0:e.user_action)||void 0===t?void 0:t.id})),function(e,t){if(!e.forwardErrorsToLogs)return{stop:R};(function(e){return Hn||(Hn=function(e){return new D((t=>{const{stop:n}=$t(XMLHttpRequest.prototype,"open",zn),{stop:o}=$t(XMLHttpRequest.prototype,"send",(n=>{!function({target:e,handlingStack:t},n,o){const r=Gn.get(e);if(!r)return;const s=r;s.state="start",s.startClocks=ke(),s.isAborted=!1,s.xhr=e,s.handlingStack=t;let i=!1;const{stop:a}=$t(e,"onreadystatechange",(()=>{e.readyState===XMLHttpRequest.DONE&&c()})),c=()=>{if(u(),a(),i)return;i=!0;const t=r;var n,c;t.state="complete",t.duration=(n=s.startClocks.timeStamp,we()-n),t.status=e.status,o.notify((c=t,{...c}))},{stop:u}=N(n,e,"loadend",c);o.notify(s)}(n,e,t)}),{computeHandlingStack:!0}),{stop:r}=$t(XMLHttpRequest.prototype,"abort",Jn);return()=>{n(),o(),r()}}))}(e)),Hn})(e).subscribe((e=>{"complete"===e.state&&n("xhr",e)})),Ut().subscribe((e=>{"resolve"===e.state&&n("fetch",e)}));function n(n,o){var r;function s(e){const r={isAborted:o.isAborted,handlingStack:o.handlingStack};t.notify(0,{rawLogsEvent:{message:`${Kn(n)} error ${o.method} ${o.url}`,date:o.startClocks.timeStamp,error:{stack:e||"Failed to load",handling:void 0},http:{method:o.method,status_code:o.status,url:o.url},status:St.error,origin:"network"},domainContext:r})}r=o.url,be.every((e=>r.includes(e)))||!function(e){return 0===e.status&&"opaque"!==e.responseType}(o)&&!Me(o.status)||("xhr"in o?function(e,t,n){"string"==typeof e.response?n(Wn(e.response,t)):n(e.response)}(o.xhr,e,s):o.response?function(e,t,n){const o=function(e){try{return e.clone()}catch(e){return}}(e);o&&o.body?window.TextDecoder?function(e,t,n){!function(e,t,n){const o=e.getReader(),r=[];let s=0;function i(){let e,i;if(o.cancel().catch(R),n.collectStreamBody){let t;if(1===r.length)t=r[0];else{t=new Uint8Array(s);let e=0;r.forEach((n=>{t.set(n,e),e+=n.length}))}e=t.slice(0,n.bytesLimit),i=t.length>n.bytesLimit}t(void 0,e,i)}!function e(){o.read().then(f((t=>{t.done?i():(n.collectStreamBody&&r.push(t.value),s+=t.value.length,s>n.bytesLimit?i():e())})),f((e=>t(e))))}()}(e,((e,t,o)=>{if(e)n(e);else{let e=(new TextDecoder).decode(t);o&&(e+="..."),n(void 0,e)}}),{bytesLimit:t,collectStreamBody:!0})}(o.body,t.requestErrorResponseLengthLimit,((e,t)=>{n(e?"Unable to retrieve response: "+e:t)})):o.text().then(f((e=>n(Wn(e,t)))),f((e=>n("Unable to retrieve response: "+e)))):n()}(o.response,e,s):o.error&&function(e,t,n){n(Wn(ie(K(e)),t))}(o.error,e,s))}}(o,i),function(e,t){if(!e.forwardErrorsToLogs)return{stop:R};const n=new D,{stop:o}=function(e){const t=(t,n)=>{const o=ue({stackTrace:n,originalError:t,startClocks:ke(),nonErrorPrefix:"Uncaught",source:je,handling:"unhandled"});e.notify(o)},{stop:n}=(o=t,$t(window,"onerror",(({parameters:[e,t,n,r,s]})=>{let i;pe(s)||(i=function(e,t,n,o){if(void 0===t)return;const{name:r,message:s}=function(e){let t,n;return"[object String]"==={}.toString.call(e)&&([,t,n]=re.exec(e)),{name:t,message:n}}(e);return{name:r,message:s,stack:[{url:t,column:o,line:n}]}}(e,t,n,r)),o(null!=s?s:e,i)})));var o;const{stop:r}=function(e){return $t(window,"onunhandledrejection",(({parameters:[t]})=>{e(t.reason||"Empty reason")}))}(t);return{stop(){n(),r()}}}(n);n.subscribe((e=>{t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:xt(e),origin:je,status:St.error},messageContext:e.context})}))}(o,i),function(n,o){var r;(r=n.forwardConsoleLogs,M(...r.map((n=>(Nn[n]||(Nn[n]=function(n){return new D((o=>{const r=t[n];return t[n]=(...t)=>{r.apply(console,t);const s=se("console error");p((()=>{o.notify(function(t,n,o){const r=t.map((e=>function(e){return"string"==typeof e?A(e):pe(e)?ae(K(e)):O(A(e),void 0,2)}(e))).join(" ");if(n===e.error){const e=ue({originalError:t.find(pe),handlingStack:o,startClocks:ke(),source:qe,handling:"handled",nonErrorPrefix:"Provided",useFallbackStack:!1});return e.message=r,{api:n,message:r,handlingStack:o,error:e}}return{api:n,message:r,error:void 0,handlingStack:o}}(t,n,s))}))},()=>{t[n]=r}}))}(n)),Nn[n]))))).subscribe((e=>{var t;const n={rawLogsEvent:{date:we(),message:e.message,origin:qe,error:e.error&&xt(e.error),status:Fn[e.api]},messageContext:null===(t=e.error)||void 0===t?void 0:t.context,domainContext:{handlingStack:e.handlingStack}};o.notify(0,n)}))}(o,i),function(e,t){(function(e,t){const n=[];t.includes(En.cspViolation)&&n.push(function(e){return new D((t=>{const{stop:n}=N(e,document,"securitypolicyviolation",(e=>{t.notify(function(e){const t=`'${e.blockedURI}' blocked by '${e.effectiveDirective}' directive`;return Tn({type:e.effectiveDirective,message:`${En.cspViolation}: ${t}`,originalError:e,csp:{disposition:e.disposition},stack:Rn(e.effectiveDirective,e.originalPolicy?`${t} of the policy "${jt(e.originalPolicy,100,"...")}"`:"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}(e))}));return n}))}(e));const o=t.filter((e=>e!==En.cspViolation));return o.length&&n.push(function(e){return new D((t=>{if(!window.ReportingObserver)return;const n=f(((e,n)=>e.forEach((e=>t.notify(function(e){const{type:t,body:n}=e;return Tn({type:n.id,message:`${t}: ${n.message}`,originalError:e,stack:Rn(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}(e)))))),o=new window.ReportingObserver(n,{types:e,buffered:!0});return o.observe(),()=>{o.disconnect()}}))}(o)),M(...n)})(e,e.forwardReports).subscribe((e=>{let n,o=e.message;const r="deprecation"===e.originalError.type?St.warn:St.error;var s,i;r===St.error?n=xt(e):e.stack&&(o+=" Found in "+(s=e.stack,null===(i=/@ (.+)/.exec(s))||void 0===i?void 0:i[1])),t.notify(0,{rawLogsEvent:{date:we(),message:o,origin:Ne,error:n,status:r}})}))}(o,i);const{handleLog:S}=function(e){return{handleLog(o,r,s,i,a){const c=w(r.getContext(),o.context);if(wt(o.status,"console",r)&&function({status:e,message:o},r){n[Zn[e]].call(t,o,r)}(o,c),wt(o.status,Ct,r)){const t={rawLogsEvent:{date:a||we(),message:o.message,status:o.status,origin:Be},messageContext:c,savedCommonContext:i};s&&(t.domainContext={handlingStack:s}),e.notify(0,t)}}}}(i);if(function(e,t,n,o,r,s){const i=_t.concat(["custom"]),a={};i.forEach((e=>{a[e]=function(e,t,n){let o=0,r=!1;return{isLimitReached(){if(0===o&&C((()=>{o=0}),6e4),o+=1,o<=t||r)return r=!1,!1;if(o===t+1){r=!0;try{n({message:`Reached max number of ${e}s by minute: ${t}`,source:Ue,startClocks:ke()})}finally{r=!1}}return!0}}}(e,t.eventRateLimiterThreshold,s)})),n.subscribe(0,(({rawLogsEvent:s,messageContext:i,savedCommonContext:c,domainContext:u})=>{var l,d;const f=s.date-Ce(),p=e.findTrackedSession(f);if(!e.findTrackedSession(f,{returnInactive:!0}))return;const g=c||r();p&&p.anonymousId&&!g.user.anonymous_id&&(g.user.anonymous_id=p.anonymousId);const m=o.triggerHook(0,{startTime:f}),y=w({service:t.service,session_id:p?p.id:void 0,session:p?{id:p.id}:void 0,usr:G(g.user)?void 0:g.user,view:g.view},m,s,i);!1===(null===(l=t.beforeSend)||void 0===l?void 0:l.call(t,y,u))||y.origin!==Ue&&(null!==(d=a[y.status])&&void 0!==d?d:a.custom).isLimitReached()||n.notify(1,y)}))}(m,o,i,a,r,l),Ae())!function(e){const t=Le();e.subscribe(1,(e=>{t.send("log",e)}))}(i);else{const{stop:e}=function(e,t,n,o,r){const s=Xe(e,{endpoint:e.logsEndpointBuilder,encoder:Ln()},e.replica&&{endpoint:e.replica.logsEndpointBuilder,encoder:Ln()},n,o,r.expireObservable);return t.subscribe(1,(e=>{s.add(e)})),s}(o,i,l,d,m);c.push((()=>e()))}var k;return{handleLog:S,getInternalContext:(k=m,{get(e){const t=k.findTrackedSession(e);if(t)return{session_id:t.id}}}).get,accountContext:y,globalContext:h,stop(){c.forEach((e=>e())),b()}}}(s,l,i);return g=function(e,t){return{init(e){vt("DD_LOGS",e)},initConfiguration:e,...t}}(r,a),a}));const m=()=>g,y={};return function(e){const t={version:"6.11.0-4233472ec583d48f65d867a48a5810253af37d82",onReady(e){e()},...e};return Object.defineProperty(t,"_setDebug",{get:()=>d,enumerable:!1}),t}({logger:new Et(((...e)=>g.handleLog(...e))),init:f((e=>g.init(e))),setTrackingConsent:f((e=>{i.update(e),at({feature:"set-tracking-consent",tracking_consent:e})})),getGlobalContext:lt(m,ft,gt),setGlobalContext:lt(m,ft,mt),setGlobalContextProperty:lt(m,ft,yt),removeGlobalContextProperty:lt(m,ft,ht),clearGlobalContext:lt(m,ft,bt),createLogger:f(((e,t={})=>(y[e]=new Et(((...e)=>g.handleLog(...e)),A(e),t.handler,t.level,A(t.context)),y[e]))),getLogger:f((e=>y[e])),getInitConfiguration:f((()=>v(g.initConfiguration))),getInternalContext:f((e=>g.getInternalContext(e))),setUser:f(o.setContext),getUser:f(o.getContext),setUserProperty:f(o.setContextProperty),removeUserProperty:f(o.removeContextProperty),clearUser:f(o.clearContext),setAccount:lt(m,pt,mt),getAccount:lt(m,pt,gt),setAccountProperty:lt(m,pt,yt),removeAccountProperty:lt(m,pt,ht),clearAccount:lt(m,pt,bt)})}();!function(e,t,n){const o=e[t];o&&!o.q&&o.version&&r.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),e[t]=n,o&&o.q&&o.q.forEach((e=>c(e,"onReady callback threw an error:")()))}(y(),"DD_LOGS",Xn)})();